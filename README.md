# CDNTree
CDN技术研究


![](https://i.imgur.com/4nbUc6L.png)

<pre>
CDN原理
          CDN全称为Content Delivery Network，内容分发网络，其目的是通过在现有的Internet
      中增加一层新的CACHE(缓存)层，将网站的内容发布到最接近用户的网络“边缘”节点，使得用户可以
      就近取得所需的内容，提高用户访问网站的响应速度。从技术上全面解决由于网络带宽小，用户访问量
      大，网点分布不均匀等原因，提高用户访问网站的响应速度。
</pre>

<pre>
          Cache层的技术，消除数据峰值访问造成的节点设备阻塞。Cache服务器具有缓存的功能，所以大部
      分网页对象如html, htm, php等页面文件，gif,png,jpg等图片文件，以及其他格式的文件，在有效
      期TTL内，对于重复的访问，不必从源站点重新传送文件实体，只需要通过简单的认证，就可以将本地的
      副本传送给访问者，由于缓存服务器通常部署在靠近用户端，所以能获得近似局域网的响应速度，并有效
      减少广域网带宽的消耗。不仅能提高响应速度，解决带宽，对于加速WEB服务器，有效减轻源服务器的负
      载也是非常有效的。

      客户端加速：
                Cache部署在网络出口处，把常访问的内存缓存在本地，提高响应速度和节约带宽。

      服务器端加速：
                Cache部署在服务器前端，作为WEB服务器的代理缓存机，提高web服务器的性能，加速访问
            速度。
</pre>


![](https://i.imgur.com/qUAGy33.png)

<pre>
智能调度DNS
          
          智能调度DNS是CDN服务中的关键系统，当用户访问加入CDN服务的网站时，域名解析请求将最终由
      智能调度DNS负责处理，它通过一组预先定义好的策略，将当时最接近用户的节点地址提供给用户，使用户
      可以得到快速的服务。

          同时智能DNS需要与分布在各地的CDN节点保持童心，跟踪各节点的健康状态，容量等，确保将用户的
      请求分配到就近可用的节点上。

      缓存功能服务：
                 负载均衡设备： LVS, F5
                 内存Cache服务  squid
</pre>

<pre>
          在建立CDN网络时，最关键的就是智能调度DNS，这个是CDN网络总协调，通过高效的算法，可以使用户
      得到最佳的体验效果，其次是CDN节点的管理，比如涉及到内容的同步，配置文件的更新等。
</pre>

<pre>
回源策略：
          源站内容更新的时候，源站主动把内容推送到CDN节点。

          当用户访问某个URL，如果被解析到的那个CDN节点没有缓存响应的内容，或者是缓存已经过期，就会回
      源获取，如果没有人访问，那么CDN节点不会主动去取。
</pre>